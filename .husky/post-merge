#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ”„ Running post-merge hooks..."

# Check if package.json or package-lock.json changed
if git diff HEAD@{1} --name-only | grep -q "package.*\.json"; then
  echo "ğŸ“¦ Package files changed, running npm install..."
  npm install
fi

# Check if config files changed
if git diff HEAD@{1} --name-only | grep -q "config/"; then
  echo "âš™ï¸  Config files changed, you may need to restart the development server"
fi

# Check if docker-compose files changed
if git diff HEAD@{1} --name-only | grep -q "docker-compose"; then
  echo "ğŸ³ Docker Compose files changed, consider running: npm run docker:up"
fi

# Check if database schema changed
if git diff HEAD@{1} --name-only | grep -q "migrations\|schema"; then
  echo "ğŸ—ƒï¸  Database files changed, consider running migrations"
fi

echo "âœ… Post-merge hooks completed!"